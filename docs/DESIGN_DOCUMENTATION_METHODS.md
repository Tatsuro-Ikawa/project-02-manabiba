# 設計書の記述方法ガイド

各設計書に適した記述方法とツールをまとめます。

## 📊 設計書別の記述方法

### 1. 外部仕様書（ユーザー視点）

#### 1.1 要件定義書
**推奨記述方法**:
- **Markdown/テキスト**: 構造化された文書形式
- **表形式**: 要件一覧表（Excel/Google Sheets）
- **図**: 要件の関係性を示す図（必要に応じて）

**理由**: 要件は自然言語で記述するため、Markdownが最適。表形式で管理しやすい。

**ツール例**:
- Markdown（.md）
- Confluence
- Notion
- Google Docs

#### 1.2 機能仕様書
**推奨記述方法**:
- **Markdown/テキスト**: 機能の詳細説明
- **UML**: ユースケース図、アクティビティ図
- **フローチャート**: 処理フロー
- **表形式**: 入力・出力定義

**理由**: 機能の動作を視覚的に表現するため、UMLやフローチャートが有効。

**ツール例**:
- PlantUML（UML図）
- Mermaid（フローチャート）
- Draw.io / Lucidchart
- Markdown + 図

#### 1.3 ユーザーストーリー・ユースケース
**推奨記述方法**:
- **UML**: ユースケース図（必須）
- **テキスト**: ユースケース記述（詳細）
- **表形式**: ユーザーストーリー一覧

**理由**: ユースケース図はUMLの標準的な表現方法。

**ツール例**:
- PlantUML（ユースケース図）
- Draw.io
- Lucidchart

#### 1.4 UI/UX設計書
**推奨記述方法**:
- **画像/モックアップ**: 画面デザイン
- **ワイヤーフレーム**: 構造設計
- **プロトタイプ**: インタラクション設計
- **テキスト**: デザインシステム、ガイドライン

**理由**: 視覚的な設計のため、図や画像が必須。

**ツール例**:
- Figma / Sketch / Adobe XD
- Draw.io（ワイヤーフレーム）
- HTML/CSS（プロトタイプ）

### 2. 内部仕様書（システム視点）

#### 2.1 システムアーキテクチャ設計書
**推奨記述方法**:
- **UML**: コンポーネント図、配置図（推奨）
- **C4 Model**: コンテキスト図、コンテナ図、コンポーネント図
- **テキスト**: 技術スタック、設計判断の記録
- **図**: システム構成図、ネットワーク図

**理由**: システムの構造を視覚化するため、UMLやC4 Modelが有効。

**ツール例**:
- PlantUML（UML図）
- Draw.io / Lucidchart
- C4-PlantUML
- Mermaid

#### 2.2 データベース設計書
**推奨記述方法**:
- **ER図**: Entity Relationship Diagram（必須）
- **テーブル定義書**: 表形式（Excel/CSV）
- **UML**: クラス図（オブジェクト指向の場合）
- **テキスト**: データモデルの説明

**理由**: ER図はデータベース設計の標準的な表現方法。

**ツール例**:
- PlantUML（ER図、クラス図）
- Draw.io
- dbdiagram.io
- ER図専用ツール

#### 2.3 API設計書
**推奨記述方法**:
- **OpenAPI/Swagger**: API仕様書（標準形式）
- **テキスト**: API説明、認証方式
- **図**: APIフロー図（必要に応じて）
- **UML**: シーケンス図（API呼び出しフロー）

**理由**: OpenAPI/Swaggerは業界標準。シーケンス図でフローを可視化。

**ツール例**:
- OpenAPI/Swagger Editor
- PlantUML（シーケンス図）
- Postman（API仕様）
- Stoplight

#### 2.4 コンポーネント設計書
**推奨記述方法**:
- **UML**: クラス図、コンポーネント図（推奨）
- **テキスト**: 各コンポーネントの説明
- **表形式**: コンポーネント一覧
- **図**: 依存関係図

**理由**: コンポーネントの構造と関係をUMLで表現。

**ツール例**:
- PlantUML（クラス図、コンポーネント図）
- TypeScript型定義（コードから生成）
- Draw.io

#### 2.5 データフロー設計書
**推奨記述方法**:
- **UML**: シーケンス図（必須）、アクティビティ図
- **DFD**: データフロー図
- **フローチャート**: 処理フロー
- **テキスト**: データフローの説明

**理由**: シーケンス図は時系列でのデータフロー表現に最適。

**ツール例**:
- PlantUML（シーケンス図、アクティビティ図）
- Mermaid（フローチャート）
- Draw.io

### 3. 運用・保守設計書

#### 3.1 セキュリティ設計書
**推奨記述方法**:
- **テキスト**: セキュリティ要件、対策
- **図**: セキュリティアーキテクチャ図
- **表形式**: 脅威一覧、対策一覧
- **UML**: 必要に応じてシーケンス図（認証フロー）

**理由**: 主に文書形式。図は必要に応じて。

**ツール例**:
- Markdown
- Draw.io（アーキテクチャ図）
- PlantUML（認証フロー）

#### 3.2 パフォーマンス設計書
**推奨記述方法**:
- **テキスト**: 性能要件、最適化方針
- **図**: パフォーマンステスト結果（グラフ）
- **表形式**: 性能指標一覧
- **UML**: 必要に応じて（ボトルネック分析）

**理由**: 主に数値とグラフ。図は補助的に使用。

**ツール例**:
- Markdown + グラフ
- Excel/Google Sheets（グラフ）
- 監視ツールのダッシュボード

#### 3.3 運用設計書
**推奨記述方法**:
- **テキスト**: 手順書、チェックリスト
- **図**: デプロイメント図、監視構成図
- **表形式**: チェックリスト
- **UML**: 配置図（必要に応じて）

**理由**: 主に手順書形式。図は構成を説明する際に使用。

**ツール例**:
- Markdown
- Draw.io（構成図）
- Confluence

#### 3.4 テスト設計書
**推奨記述方法**:
- **表形式**: テストケース一覧（必須）
- **テキスト**: テスト戦略、テスト計画
- **図**: テストフロー図（必要に応じて）
- **UML**: 必要に応じて（テストシーケンス）

**理由**: テストケースは表形式が最適。

**ツール例**:
- Excel/Google Sheets（テストケース）
- TestRail / Zephyr
- Markdown

## 🎯 UMLが特に有効な設計書

### 必須でUMLを使用すべき設計書

1. **ユースケース図** → ユーザーストーリー・ユースケース
2. **シーケンス図** → データフロー設計書、API設計書
3. **クラス図** → コンポーネント設計書、データベース設計書（オブジェクト指向）
4. **コンポーネント図** → システムアーキテクチャ設計書、コンポーネント設計書
5. **アクティビティ図** → 機能仕様書、データフロー設計書

### UMLが補助的に有効な設計書

6. **配置図** → システムアーキテクチャ設計書、運用設計書
7. **状態遷移図** → 機能仕様書、コンポーネント設計書

## 📝 記述方法の選択指針

### UMLを使うべき場合
- ✅ システムの構造を表現する場合（クラス図、コンポーネント図）
- ✅ 時系列での処理フローを表現する場合（シーケンス図）
- ✅ ユーザーとシステムの相互作用を表現する場合（ユースケース図）
- ✅ 処理の流れを表現する場合（アクティビティ図）

### テキスト/表形式を使うべき場合
- ✅ 要件や仕様を記述する場合（要件定義書、機能仕様書）
- ✅ データ定義を記述する場合（データベース設計書のテーブル定義）
- ✅ 手順を記述する場合（運用設計書）
- ✅ テストケースを記述する場合（テスト設計書）

### 図（非UML）を使うべき場合
- ✅ 画面デザインを表現する場合（UI/UX設計書）
- ✅ データベースの関係を表現する場合（ER図）
- ✅ システム構成を表現する場合（構成図、ネットワーク図）

## 🛠️ 推奨ツールスタック

### このプロジェクトに推奨

1. **UML図**: PlantUML（既に使用中）
   - テキストベースでGit管理可能
   - バージョン管理しやすい

2. **ER図**: PlantUML または dbdiagram.io
   - データベース設計に最適

3. **フローチャート**: Mermaid または PlantUML
   - Markdownに埋め込み可能

4. **テキスト文書**: Markdown
   - Git管理可能
   - 読みやすい

5. **表形式**: Markdownテーブル または CSV
   - Git管理可能

6. **API仕様**: OpenAPI/Swagger
   - 業界標準

## 📋 実践的な記述方法の組み合わせ

### 例：機能仕様書の構成

```
機能仕様書.md
├── 機能概要（テキスト）
├── ユースケース図（UML - PlantUML）
├── 処理フロー（シーケンス図 - PlantUML）
├── 画面設計（画像/Figma）
├── 入力・出力定義（表形式）
└── エラーハンドリング（テキスト）
```

### 例：システムアーキテクチャ設計書の構成

```
システムアーキテクチャ設計書.md
├── 概要（テキスト）
├── システム構成図（コンポーネント図 - PlantUML）
├── 技術スタック（表形式）
├── レイヤー構成（テキスト + 図）
└── 設計判断の記録（テキスト）
```

## ✅ 結論

**UMLは一般的ですが、すべての設計書に使うわけではありません。**

- **UMLが必須**: ユースケース図、シーケンス図、クラス図、コンポーネント図
- **UMLが有効**: アクティビティ図、状態遷移図、配置図
- **テキスト/表形式が適切**: 要件定義、手順書、テストケース
- **図（非UML）が適切**: ER図、画面デザイン、構成図

**最適な組み合わせ**: 各設計書の目的に応じて、UML、テキスト、表形式、図を適切に組み合わせる。

---

**このプロジェクトでは**: 既にPlantUMLを使用しているため、UML図はPlantUMLで統一し、テキスト文書はMarkdownで記述することを推奨します。

